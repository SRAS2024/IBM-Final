<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Emotion Detector</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
      :root{
        --ink:#e5e7eb; --muted:#9ca3af;
        --bg-1:#0f172a; --bg-2:#111827;
        --glass:#0b1220cc; --glass-2:#0b1220bf;
        --accent:#60a5fa; --accent-2:#93c5fd;
        --border:rgba(255,255,255,.08); --shadow:0 8px 28px rgba(2,6,23,.35);
        --radius:16px;
      }
      *{box-sizing:border-box} html,body{height:100%}
      body{
        margin:0; color:var(--ink);
        font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        background:
          radial-gradient(1200px 600px at 10% -10%, #1f2a44 0%, transparent 60%),
          radial-gradient(1200px 600px at 110% 10%, #1b2540 0%, transparent 55%),
          linear-gradient(180deg, var(--bg-1), var(--bg-2));
      }
      .wrap{max-width:1100px;margin:0 auto;padding:2.5rem 1.25rem 4rem}
      h1{font-size:2rem;margin:0 0 1rem 0}
      .grid{display:grid;gap:1.25rem;grid-template-columns:1.4fr .9fr}
      @media (max-width: 960px){ .grid{grid-template-columns:1fr} }
      .card{
        background:linear-gradient(180deg, var(--glass), var(--glass-2));
        border:1px solid var(--border); border-radius:var(--radius);
        box-shadow:var(--shadow); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
        padding:1.25rem;
      }
      label{display:block;font-weight:600;margin-bottom:.5rem}
      textarea{
        width:100%;min-height:180px;resize:vertical;background:#0a0f1a;color:var(--ink);
        border:1px solid var(--border);border-radius:14px;padding:1rem;font-size:1rem;line-height:1.5;outline:none
      }
      textarea:focus{border-color:#3b82f6;box-shadow:0 0 0 4px rgba(59,130,246,.2)}
      .row{display:flex;align-items:center;gap:.9rem;margin-top:1rem}
      .btn{
        appearance:none;border:none;cursor:pointer;padding:.85rem 1.15rem;border-radius:12px;
        font-weight:700;background: linear-gradient(135deg, var(--accent), var(--accent-2)); color:#0b1220
      }
      .status{font-size:.95rem}
      .status.ok{color:#86efac} .status.err{color:#fca5a5}
      .kv{display:grid;grid-template-columns:1fr auto;gap:.55rem 1rem}
      .pill{padding:.55rem .7rem;border:1px solid var(--border);border-radius:12px;background:#0a0f1a;font-weight:600}
      .value{min-width:4.5rem;text-align:right;background:#04070f;border:1px solid #0f172a;padding:.55rem .7rem;border-radius:12px;font-variant-numeric:tabular-nums}
      footer{margin-top:2rem;color:var(--muted);text-align:center;font-size:.9rem}
    </style>
  </head>
  <body>
    <div class="wrap">
      <h1>Emotion Detector</h1>

      <section class="grid">
        <div class="card">
          <label for="text">Text</label>
          <textarea id="text" placeholder="Type a short passage. For example: I am grateful and excited to begin something new today."></textarea>
          <div class="row">
            <button id="analyze" class="btn">Analyze</button>
            <span id="status" class="status" aria-live="polite"></span>
          </div>
        </div>

        <div class="card">
          <h3 style="margin:.25rem 0 1rem 0">Summary</h3>
          <div class="kv">
            <div class="pill">Anger</div>   <div class="value" id="v-anger">0.000</div>
            <div class="pill">Disgust</div> <div class="value" id="v-disgust">0.000</div>
            <div class="pill">Fear</div>    <div class="value" id="v-fear">0.000</div>
            <div class="pill">Joy</div>     <div class="value" id="v-joy">0.000</div>
            <div class="pill">Sadness</div> <div class="value" id="v-sadness">0.000</div>
            <div class="pill">Dominant</div><div class="value" id="v-dominant">N/A</div>
          </div>
        </div>
      </section>

      <footer>Final Project â€¢ Polished UI</footer>
    </div>

    <script>
      const $ = (id)=>document.getElementById(id);
      const fields = {
        anger: $('v-anger'),
        disgust: $('v-disgust'),
        fear: $('v-fear'),
        joy: $('v-joy'),
        sadness: $('v-sadness'),
        dominant_emotion: $('v-dominant'),
      };

      function setStatus(text, ok=true){
        const s = $('status');
        s.textContent = text || '';
        s.className = 'status ' + (ok ? 'ok' : 'err');
      }
      function fmt(v){ return typeof v === 'number' ? v.toFixed(3) : String(v ?? ''); }

      $('analyze').addEventListener('click', async ()=>{
        const text = $('text').value.trim();
        setStatus('Analyzing...');
        try{
          const res = await fetch('/emotionDetector', {
            method:'POST', headers:{'Content-Type':'application/json'},
            body: JSON.stringify({ text })
          });
          const data = await res.json();
          if(!res.ok) throw new Error(data?.error || 'Request failed');

          fields.anger.textContent   = fmt(data.anger);
          fields.disgust.textContent = fmt(data.disgust);
          fields.fear.textContent    = fmt(data.fear);
          fields.joy.textContent     = fmt(data.joy);
          fields.sadness.textContent = fmt(data.sadness);
          fields.dominant_emotion.textContent = data.dominant_emotion || 'N/A';

          setStatus('Done', true);
        }catch(err){
          setStatus(err?.message || 'Unexpected error', false);
          fields.anger.textContent = fields.disgust.textContent = fields.fear.textContent =
          fields.joy.textContent = fields.sadness.textContent = '0.000';
          fields.dominant_emotion.textContent = 'N/A';
        }
      });
    </script>
  </body>
</html>
